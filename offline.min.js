/*! offline 0.4.0 */
(function(){var a,b,c,d,e,f,g;d=function(a,b){var c,d,e,f;f=[];for(d in b.prototype)try{e=b.prototype[d],null==a[d]&&"function"!=typeof e?f.push(a[d]=e):f.push(void 0)}catch(g){c=g}return f},a={},null==a.options&&(a.options={}),c={checkURL:function(){return"/offline-test-request/"+Math.floor(1e9*Math.random())},checkOnLoad:!1,interceptRequests:!0},a.getOption=function(b){var d,e;return d=null!=(e=a.options[b])?e:c[b],"function"==typeof d?d():d},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return a.confirmUp()},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return a.confirmDown()},!1),a.state="up",a.markUp=function(){return"up"!==a.state?(a.state="up",a.trigger("up")):void 0},a.markDown=function(){return"down"!==a.state?(a.state="down",a.trigger("down")):void 0},e={up:[],down:[]},a.on=function(a,b,c){return e[a].push([c,b])},a.off=function(a,b){var c,d,f,g,h;if(b){for(d=0,h=[];d<e.length;)g=e[d],c=g[0],f=g[1],f===b?h.push(e.splice(d--,1)):h.push(void 0);return h}return e[a]=[]},a.trigger=function(a){var b,c,d,f,g,h,i;for(g=e[a],i=[],d=0,f=g.length;f>d;d++)h=g[d],b=h[0],c=h[1],i.push(c.call(b));return i},b=function(a,b,c){var d;return d=function(){return a.status?b():c()},null===a.onprogress?(a.onerror=a.ontimeout=c,a.onload=d):a.onreadystatechange=function(){return 4===a.readyState?d():0===a.readyState?c():void 0}},a.check=function(){var c;return c=new XMLHttpRequest,c.open("GET",a.getOption("checkURL"),!0),b(c,function(){return a.markUp},function(){return a.markDown}),c.send()},a.confirmUp=a.confirmDown=a.check,g=function(a){var b,c,e;return b=function(b){var c;return c=b.open,b.open=function(d,e){return a({type:d,url:e,request:b}),c.apply(b,arguments)}},e=window.XMLHttpRequest,window.XMLHttpRequest=function(a){var c;return c=new e(a),b(c),c},d(window.XMLHttpRequest,e),null!=window.XDomainRequest?(c=window.XDomainRequest,window.XDomainRequest=function(){var a;return a=new c,b(a),a},d(window.XDomainRequest,c)):void 0},f=function(){return a.getOption("interceptRequests")&&g(function(c){var d;return d=c.request,b(d,function(){return a.confirmUp},function(){return a.confirmDown})}),a.getOption("checkOnLoad")?a.check():void 0},setTimeout(f,0),window.Offline=a}).call(this);