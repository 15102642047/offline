/*! offline 0.4.0 */
(function(){var a,b,c,d,e,f;d=function(a,b){var c,d,e,f;f=[];for(d in b.prototype)try{e=b.prototype[d],null==a[d]&&"function"!=typeof e?f.push(a[d]=e):f.push(void 0)}catch(g){c=g}return f},a={},null==a.options&&(a.options={}),c={checkURL:function(){return"/offline-test-request/"+Math.floor(1e9*Math.random())},checkOnLoad:!1,interceptRequests:!0},a.getOption=function(b){var d,e;return d=null!=(e=a.options[b])?e:c[b],"function"==typeof d?d():d},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return setTimeout(a.confirmUp,100)},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return a.confirmDown()},!1),a.state="up",a.markUp=function(){return console.log("mark up"),a.trigger("confirmed-up"),"up"!==a.state?(a.state="up",a.trigger("up")):void 0},a.markDown=function(){return console.log("mark down"),a.trigger("confirmed-down"),"down"!==a.state?(a.state="down",a.trigger("down")):void 0},e={},a.on=function(a,b,c){return null==e[a]&&(e[a]=[]),e[a].push([c,b])},a.off=function(a,b){var c,d,f,g,h;if(null!=e[a]){if(b){for(d=0,h=[];d<e[a].length;)g=e[a][d],c=g[0],f=g[1],f===b?h.push(e[a].splice(d--,1)):h.push(void 0);return h}return e[a]=[]}},a.trigger=function(a){var b,c,d,f,g,h,i;if(null!=e[a]){for(g=e[a],i=[],d=0,f=g.length;f>d;d++)h=g[d],b=h[0],c=h[1],i.push(c.call(b));return i}},b=function(a,b,c){var d,e;return d=function(){return console.log("check",a),a.status&&a.status<12e3?b():c()},null===a.onprogress?(a.addEventListener("error",c,!1),a.addEventListener("timeout",c,!1),a.addEventListener("load",d,!1)):(e=a.onreadystatechange,a.onreadystatechange=function(){return 4===a.readyState?d():0===a.readyState&&c(),"function"==typeof e?e.apply(null,arguments):void 0})},a.checks={},a.checks.xhr=function(){var c;return c=new XMLHttpRequest,c.open("GET",a.getOption("checkURL"),!0),b(c,a.markUp,a.markDown),c.send(),c},a.checks.image=function(){var b;return b=document.createElement("img"),b.onerror=a.markDown,b.onload=a.markUp,b.src="http://dqakt69vkj09v.cloudfront.net/are-we-online.gif?_="+Math.floor(1e9*Math.random()),void 0},a.check=a.checks.image,a.confirmUp=a.confirmDown=a.check,a.onXHR=function(a){var b,c,e;return b=function(b,c){var d;return d=b.open,b.open=function(e,f,g,h,i){return a({type:e,url:f,async:g,flags:c,user:h,password:i,xhr:b}),d.apply(b,arguments)}},e=window.XMLHttpRequest,window.XMLHttpRequest=function(a){var c,d,f;return c=new e(a),b(c,a),f=c.setRequestHeader,c.headers={},c.setRequestHeader=function(a,b){return c.headers[a]=b,f.call(c,a,b)},d=c.overrideMimeType,c.overrideMimeType=function(a){return c.mimeType=a,d.call(c,a)},c},d(window.XMLHttpRequest,e),null!=window.XDomainRequest?(c=window.XDomainRequest,window.XDomainRequest=function(){var a;return a=new c,b(a),a},d(window.XDomainRequest,c)):void 0},f=function(){return a.getOption("interceptRequests")&&a.onXHR(function(c){var d;return d=c.xhr,b(d,a.confirmUp,a.confirmDown)}),a.getOption("checkOnLoad")?a.check():void 0},setTimeout(f,0),window.Offline=a,a.on("up",function(){return console.log("up")}),a.on("down",function(){return console.log("down")})}).call(this);